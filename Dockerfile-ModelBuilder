FROM python:3.6.6-slim-stretch

RUN mkdir /data

# Install requirements separately for improved docker caching
COPY requirements.txt /code/
RUN pip install -r /code/requirements.txt

# Copy source code
COPY . /code

# Install gordo-components
RUN cd /code && pip install .

# build.sh (build the model) as executable default command
RUN cp /code/build.sh /usr/bin/build \
    && chmod +x /usr/bin/build

CMD ["build"]
