sudo: required

services: docker

language: python

python:
  - "3.6"

os:
  - linux

install: 
  - pip install -r requirements.txt
  - pip install black

script:
  - black --check gordo_components/ tests/
  - python setup.py test
  - make images


deploy:
  - provider: script
    script: make images push-prod-images
    on:
      branch: master
  - provider: script
    script: make images push-prod-images
    on:
      tags: true
